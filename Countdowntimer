private void startCountdown(TextView tvTimer, ProgressBar progressBar, int minutes) {
    long startTimeInMillis = minutes * 60 * 1000;

    // Countdown for text
    CountDownTimer countDownTimer = new CountDownTimer(startTimeInMillis, 1000) {
        @Override
        public void onTick(long millisUntilFinished) {
            int min = (int) (millisUntilFinished / 1000) / 60;
            int sec = (int) (millisUntilFinished / 1000) % 60;
            tvTimer.setText(String.format("%02d:%02d", min, sec));
        }

        @Override
        public void onFinish() {
            tvTimer.setText("00:00");
            tvTimer.setTextColor(Color.RED);
            progressBar.setProgress(0);
        }
    };
    countDownTimer.start();

    // Smooth progress animation
    ValueAnimator animator = ValueAnimator.ofInt(1000, 0);
    animator.setDuration(startTimeInMillis);
    animator.setInterpolator(new LinearInterpolator());
    animator.addUpdateListener(animation -> {
        int value = (int) animation.getAnimatedValue();
        progressBar.setProgress(value);
    });
    animator.start();
}
